{% comment %}
  Renders a header search modal. Should be used with 'header.liquid'

  Accepts:
  - input_id: {String} Id for the search input element (required)

  Usage:
  {% render 'header-search', input_id: 'My-Id'%}
{% endcomment %}

<details-modal class="header__search">
  <details>
    <summary class="header__icon header__icon--search header__icon--summary link focus-inset modal__toggle" aria-haspopup="dialog" aria-label="{{ 'general.search.search' | t }}">
      <span>
      <a href="#icon-search">
            <svg style="position: relative; z-index:99;" class="modal__toggle-open icon icon-search" aria-hidden="true" focusable="false" width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M18.0959 16.917L13.3648 12.1859C14.4293 10.8574 15.0081 9.20511 15.0054 7.50273C15.0054 3.35914 11.6465 0 7.50271 0C3.35913 0 0 3.35914 0 7.50273C0 11.6463 3.35913 15.0055 7.50271 15.0055C9.27419 15.0055 10.9023 14.3915 12.1859 13.3646L16.917 18.0957C16.9943 18.1733 17.0861 18.2348 17.1873 18.2767C17.2884 18.3186 17.3968 18.3401 17.5063 18.34C17.6712 18.34 17.8324 18.2911 17.9695 18.1995C18.1066 18.1079 18.2134 17.9778 18.2765 17.8255C18.3396 17.6731 18.3561 17.5055 18.324 17.3438C18.2919 17.1821 18.2125 17.0336 18.0959 16.917ZM7.50271 13.3382C4.27988 13.3382 1.66727 10.7256 1.66727 7.50273C1.66727 4.27989 4.27988 1.66727 7.50271 1.66727C10.7258 1.66727 13.3382 4.27989 13.3382 7.50273C13.3382 10.7256 10.7258 13.3382 7.50271 13.3382Z" fill="url(#paint0_linear_6_13)"/>
<defs>
<linearGradient id="paint0_linear_6_13" x1="9.17" y1="0" x2="9.17" y2="18.34" gradientUnits="userSpaceOnUse">
<stop stop-color="#9C2B68"/>
<stop offset="0.520833" stop-color="#6D026D"/>
<stop offset="1" stop-color="#EE2FFF"/>
</linearGradient>
</defs>
  
</svg>
</a>

        <svg class="modal__toggle-close icon icon-close" aria-hidden="true" focusable="false">
          <use href="#icon-close">
        </svg>
      </span>
    </summary>
    <div class="search-modal modal__content gradient" role="dialog" aria-modal="true" aria-label="{{ 'general.search.search' | t }}">
      <div class="modal-overlay"></div>
      <div class="search-modal__content{% if settings.inputs_shadow_vertical_offset != 0 and settings.inputs_shadow_vertical_offset < 0 %} search-modal__content-top{% else %} search-modal__content-bottom{% endif %}" tabindex="-1">
        {%- if settings.predictive_search_enabled -%}
          <predictive-search class="search-modal__form" data-loading-text="{{ 'accessibility.loading' | t }}">
        {%- else -%}
          <search-form class="search-modal__form">
        {%- endif -%}
            <form action="{{ routes.search_url }}" method="get" role="search" class="search search-modal__form">
              <div class="field">
                <input class="search__input field__input"
                  id="{{ input_id }}"
                  type="search"
                  name="q"
                  value="{{ search.terms | escape }}"
                  placeholder="{{ 'general.search.search' | t }}"
                  {%- if settings.predictive_search_enabled -%}
                    role="combobox"
                    aria-expanded="false"
                    aria-owns="predictive-search-results"
                    aria-controls="predictive-search-results"
                    aria-haspopup="listbox"
                    aria-autocomplete="list"
                    autocorrect="off"
                    autocomplete="off"
                    autocapitalize="off"
                    spellcheck="false"
                  {%- endif -%}
                >
                <label class="field__label" for="{{ input_id }}">{{ 'general.search.search' | t }}</label>
                <input type="hidden" name="options[prefix]" value="last">
                <button type="reset" class="reset__button field__button{% if search.terms == blank %} hidden{% endif %}" aria-label="{{ 'general.search.reset' | t }}">
                  <svg class="icon icon-close" aria-hidden="true" focusable="false">
                    <use xlink:href="#icon-reset">
                  </svg>
                </button>
                <button class="search__button field__button" aria-label="{{ 'general.search.search' | t }}">
                  <svg class="icon icon-search" aria-hidden="true" focusable="false">
                    <use href="#icon-search">
                  </svg>
                </button>
              </div>

              {%- if settings.predictive_search_enabled -%}
                <div class="predictive-search predictive-search--header" tabindex="-1" data-predictive-search>
                  <div class="predictive-search__loading-state">
                    <svg aria-hidden="true" focusable="false" class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                      <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
                    </svg>
                  </div>
                </div>

                <span class="predictive-search-status visually-hidden" role="status" aria-hidden="true"></span>
              {%- endif -%}
            </form>
          {%- if settings.predictive_search_enabled -%}
            </predictive-search>
          {%- else -%}
            </search-form>
          {%- endif -%}
        <button type="button" class="search-modal__close-button modal__close-button link link--text focus-inset" aria-label="{{ 'accessibility.close' | t }}">
          <svg class="icon icon-close" aria-hidden="true" focusable="false">
            <use href="#icon-close">
          </svg>
        </button>
      </div>
    </div>
  </details>
</details-modal>
